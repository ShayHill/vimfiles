
snippet update_venv

# Create a Python venv at ./venv if it doesn't exist

if (!(Test-Path -PathType container "source"))
{
	python -m venv venv
}

# Read pyproject.toml to create a requirements.txt and dev-requirements.txt
# Use these to update your Python venv at ./venv

pip-compile -o requirements.txt pyproject.toml --upgrade --strip-extras
pip-compile --extra=dev -o dev-requirements.txt pyproject.toml --upgrade --strip-extras
venv\Scripts\activate
pip-sync --python-executable .\venv\Scripts\python.exe requirements.txt dev-requirements.txt
python -m pip install -e .
endsnippet
